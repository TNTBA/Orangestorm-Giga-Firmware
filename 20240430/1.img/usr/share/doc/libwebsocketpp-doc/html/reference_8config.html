<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WebSocket++: Config Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="manual.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WebSocket++
   &#160;<span id="projectnumber">0.8.1</span>
   </div>
   <div id="projectbrief">C++ websocket client/server library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Config Reference </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>WebSocket++ uses a config template parameter to supply a number of compile type policy types and default numerical values for buffer sizes, timeouts, security behavior, etc. Swapping policies allows changing certain core library behavior designed to be pluggable.</p>
<p>A custom config can be made standalone or can subclass one of the bundled configs and just override a few things.</p>
<p><b>Example</b> </p><div class="fragment"><div class="line"><span class="comment">// some config options may require additional includes or dependencies.</span></div><div class="line"><span class="comment">// syslog logging policy, for example, requires &lt;syslog.h&gt;, </span></div><div class="line"><span class="comment">// the permessage deflate settings require zlib.</span></div><div class="line"><span class="preprocessor">#include &lt;websocketpp/logger/syslog.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;websocketpp/extensions/permessage_deflate/enabled.hpp&gt;</span></div><div class="line"></div><div class="line"><span class="comment">// Custom server config based on bundled asio config</span></div><div class="line"><span class="keyword">struct </span>custom_server_config : <span class="keyword">public</span> <a class="code" href="structwebsocketpp_1_1config_1_1asio.html">websocketpp::config::asio</a> {</div><div class="line">    <span class="comment">// Replace default stream logger with a syslog logger</span></div><div class="line">    <span class="keyword">typedef</span> <a class="code" href="classwebsocketpp_1_1log_1_1syslog.html">websocketpp::log::syslog&lt;concurrency_type, websocketpp::log::elevel&gt;</a> elog_type;</div><div class="line">    <span class="keyword">typedef</span> <a class="code" href="classwebsocketpp_1_1log_1_1syslog.html">websocketpp::log::syslog&lt;concurrency_type, websocketpp::log::alevel&gt;</a> alog_type;</div><div class="line"></div><div class="line">    <span class="comment">// Reduce read buffer size to optimize for small messages</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> connection_read_buffer_size = 1024;</div><div class="line"></div><div class="line">    <span class="comment">// enable permessage_compress extension</span></div><div class="line">    <span class="keyword">struct </span>permessage_deflate_config {};</div><div class="line"></div><div class="line">    <span class="keyword">typedef</span> <a class="code" href="classwebsocketpp_1_1extensions_1_1permessage__deflate_1_1enabled.html">websocketpp::extensions::permessage_deflate::enabled</a></div><div class="line">        &lt;permessage_deflate_config&gt; permessage_deflate_type;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <a class="code" href="classwebsocketpp_1_1server.html">websocketpp::server&lt;custom_server_config&gt;</a> server_endpoint_type;</div></div><!-- fragment --><h2>Core Config Options </h2>
<h3>Policies</h3>
<p>Policies are classes used to allow clean swapping of behavior without changing the core library</p>
<table class="doxtable">
<tr>
<th>Typedef Name </th><th>Effect  </th></tr>
<tr>
<td>concurrency_type </td><td>Concurrency policy </td></tr>
<tr>
<td>elog_type </td><td>Error logger type </td></tr>
<tr>
<td>alog_type </td><td>Access logger type </td></tr>
<tr>
<td>request_type </td><td>HTTP request type </td></tr>
<tr>
<td>response_type </td><td>HTTP response type </td></tr>
<tr>
<td>message_type </td><td>Type to deliver recieved messages </td></tr>
<tr>
<td>con_msg_manager_type </td><td>Connection level message manager </td></tr>
<tr>
<td>endpoint_msg_manager_type </td><td>Endpoint level message manager </td></tr>
<tr>
<td>rng_type </td><td>Random Number Generation policy </td></tr>
<tr>
<td>transport_type </td><td>Transport policy to use </td></tr>
<tr>
<td>endpoint_base </td><td>User overridable Endpoint base class </td></tr>
<tr>
<td>connection_base </td><td>User overridable Connection base class </td></tr>
</table>
<h3>Timeouts Values</h3>
<p>These represent the length of time (in ms) before the given operation is aborted</p>
<table class="doxtable">
<tr>
<th>Field </th><th>Type </th><th>Default </th><th>Operation  </th></tr>
<tr>
<td>timeout_open_handshake </td><td>long </td><td>5000 </td><td>Opening handshake </td></tr>
<tr>
<td>timeout_close_handshake </td><td>long </td><td>5000 </td><td>Closing handshake </td></tr>
<tr>
<td>timeout_pong </td><td>long </td><td>5000 </td><td>No pong recieved after ping </td></tr>
</table>
<h3>Performance tuning</h3>
<table class="doxtable">
<tr>
<th>Field </th><th>Type </th><th>Default </th><th>Meaning  </th></tr>
<tr>
<td>connection_read_buffer_size </td><td>size_t </td><td>16384 </td><td>Size of the per-connection read buffer </td></tr>
<tr>
<td>enable_multithreading </td><td>bool </td><td>true </td><td>Disabling may reduce locking overhead for single threaded programs </td></tr>
</table>
<h4>Connection Read Buffer</h4>
<p>Each connection has an internal buffer of this size. A larger value will result in fewer trips through the library and less CPU overhead at the expense of increased memory usage per connection.</p>
<p>If your application primarily deals in very large messages you may want to try setting this value higher.</p>
<p>If your application has a lot of connections or primarily deals in small messages you may want to try setting this smaller.</p>
<h3>Security settings</h3>
<table class="doxtable">
<tr>
<th>Field </th><th>Type </th><th>Default </th><th>Effect  </th></tr>
<tr>
<td>drop_on_protocol_error </td><td>bool </td><td>false </td><td>Omit close handshake on protocol error </td></tr>
<tr>
<td>silent_close </td><td>bool </td><td>false </td><td>Don't return close codes or reasons </td></tr>
<tr>
<td>max_message_size </td><td>size_t </td><td>32MB </td><td>WebSocket max message size limit </td></tr>
<tr>
<td>max_http_body_size </td><td>size_t </td><td>32MB </td><td>HTTP Parser's max body size limit </td></tr>
</table>
<h4>Drop on protocol error</h4>
<p>Drop connections on protocol error rather than sending a close frame. Off by default. This may result in legitimate messages near the error being dropped as well. It may free up resources otherwise spent dealing with misbehaving clients.</p>
<h4>Silent Close</h4>
<p>Silence close suppresses the return of detailed connection close information during the closing handshake. This information is useful for debugging and presenting useful errors to end users but may be undesirable for security reasons in some production environments. Close reasons could be used by an attacker to confirm that the endpoint is out of resources or be used to identify the WebSocket implementation in use.</p>
<p>Note: this will suppress <em>all</em> close codes, including those explicitly sent by local applications.</p>
<h4>Max message size</h4>
<p>Default value for the processor's maximum message size. Maximum message size determines the point at which the library will drop a connection with the message_too_big protocol error.</p>
<h4>Max HTTP header size</h4>
<p>Maximum body size determines the point at which the library will abort reading an HTTP message body and return the 413/request entity too large error.</p>
<h2>Transport Config Options </h2>
<h3>Policies</h3>
<p>Policies are classes used to allow clean swapping of behavior without changing the core library</p>
<table class="doxtable">
<tr>
<th>Typedef Name </th><th>Effect  </th></tr>
<tr>
<td>concurrency_type </td><td>Concurrency Policy </td></tr>
<tr>
<td>elog_type </td><td>Error logger type </td></tr>
<tr>
<td>alog_type </td><td>Access logger type </td></tr>
<tr>
<td>request_type </td><td>HTTP request type </td></tr>
<tr>
<td>response_type </td><td>HTTP response type </td></tr>
</table>
<h3>Timeouts Values</h3>
<p>These represent the length of time (in ms) before the given operation is aborted</p>
<table class="doxtable">
<tr>
<th>Field </th><th>Type </th><th>Default </th><th>Operation  </th></tr>
<tr>
<td>timeout_socket_pre_init </td><td>long </td><td>5000 </td><td>Transport dependent </td></tr>
<tr>
<td>timeout_proxy </td><td>long </td><td>5000 </td><td>Proxy handshake </td></tr>
<tr>
<td>timeout_socket_post_init </td><td>long </td><td>5000 </td><td>Transport dependent (commonly: TLS handshake) </td></tr>
<tr>
<td>timeout_dns_resolve </td><td>long </td><td>5000 </td><td>DNS resolution </td></tr>
<tr>
<td>timeout_connect </td><td>long </td><td>5000 </td><td>TCP Connect </td></tr>
<tr>
<td>timeout_socket_shutdown </td><td>long </td><td>5000 </td><td>Socket shutdown </td></tr>
</table>
<h3>Performance tuning</h3>
<table class="doxtable">
<tr>
<th>Field </th><th>Type </th><th>Default </th><th>Meaning  </th></tr>
<tr>
<td>enable_multithreading </td><td>bool </td><td>true </td><td>Disabling may reduce locking overhead for single threaded programs </td></tr>
</table>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
